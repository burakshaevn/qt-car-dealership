# Десктоп приложение «Управление автосалоном Mercedes-Benz»

Основная задача — демонстрация навыков работы с **С++17**, СУБД **PostgreSQL** и фреймворком **Qt 6.8.2**.

## Описание
Разработано с помощью C++17 с использованием фреймворка Qt 6.8.2 и системой управления базами данных PostgreSQL. Приложение предоставляет полный функционал для управления автосалоном Mercedes-Benz, включая работу с клиентами, администрирование, управление автопарком и сервисными услугами.

В программе предусмотрено два типа пользователей:
* **Администратор** - полный доступ к управлению данными
* **Клиент** - доступ к каталогу, личному кабинету и сервисным услугам

## Функциональные возможности

### Для клиентов:
- Просмотр каталога автомобилей
- Фильтрация по цветам и типам автомобилей
- Детальный просмотр автомобиля с возможностью выбора цвета
- Запись на тест-драйв
- Оформление покупки
- Заявки на кредит и страхование
- Запись на сервисное обслуживание
- Личный кабинет с историей покупок и заявок

### Для администраторов:
- Управление каталогом автомобилей
- Обработка заявок клиентов
- Управление пользователями
- Ведение статистики продаж
- Редактирование справочной информации

## Сервисные услуги

| Обслуживание | Аренда | Кредитование | Страхование |
|--------------|--------|--------------|-------------|
| ![Обслуживание](https://github.com/user-attachments/assets/bd65a0bc-9937-45c2-8709-f7a96cb9668e) | ![Аренда](https://github.com/user-attachments/assets/13ac6e25-5ba2-4f26-a597-b08d472d68ce) | ![Кредитование](https://github.com/user-attachments/assets/92d7a944-5375-415d-a0cb-cef69913c0c3) | ![Страхование](https://github.com/user-attachments/assets/7c6e6592-7b36-42f0-9092-fedeac443434) |
| Техническое обслуживание и ремонт | Краткосрочная и долгосрочная аренда | Различные программы кредитования | ОСАГО, КАСКО и другие виды страхования |

## Установка и запуск

### Требования:
- C++17
- Qt 6.6.2+
- PostgreSQL 17+
- CMake 3.5+

### Настройка базы данных:
1. Установить PostgreSQL
2. Создать базу данных
3. Импортировать структуру из файла `database_structure.sql`
4. Настроить подключение в конфигурационном файле

### Сборка проекта:
```bash
mkdir build
cd build
cmake ..
make
```

## Скриншоты интерфейса

### Главный экран
<div align="center">
  <img src="https://github.com/user-attachments/assets/016fa150-bb0e-443d-a79f-854c01df7455" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Главная страница приложения с каталогом автомобилей Mercedes-Benz. Предоставляет быстрый доступ к основным функциям: просмотр автомобилей, фильтрация, поиск и личный кабинет.

**Функции:**
- Отображение каталога автомобилей в виде карточек
- Плавающее меню навигации 

### Авторизация
<div align="center">
  <img src="https://github.com/user-attachments/assets/335c11bd-a6ea-4d2c-ae79-266d457ac88b" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Система аутентификации с поддержкой двух типов пользователей - клиентов и администраторов.

**Алгоритм безопасности:**
- Хеширование паролей с использованием SHA-256
- Валидация входных данных на стороне клиента и сервера
- Защита от SQL-инъекций через параметризованные запросы
- Разграничение прав доступа на основе ролей пользователей

### Каталог автомобилей
<div align="center">
  <img src="https://github.com/user-attachments/assets/da6c6ae8-b9f4-4e7a-bcfe-452bf16bde80" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Основной каталог с полным ассортиментом автомобилей Mercedes-Benz.

**Функции:**
- Отображение автомобилей в виде карточек с изображениями
- Информация о модели, цвете и цене
- Быстрое добавление в корзину
- Переход к детальному просмотру

### Сортировка каталога по цветам автомобилей
<div align="center">
  <img src="https://github.com/user-attachments/assets/5d39b431-6ba8-4e96-898f-adc52f47b01d" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Система фильтрации автомобилей по цветам.

**Алгоритм фильтрации:**
- Динамическая фильтрация на основе SQL-запросов с условием WHERE
- Карточки автомобилей хранятся в кэше для оптимизации производительности
- Обновление интерфейса в реальном времени без перезагрузки страницы
- Поддержка множественного выбора цветов

### Сортировка каталога по типам автомобилей
<div align="center">
  <img src="https://github.com/user-attachments/assets/ac413ef4-2180-4566-b2c4-62c0ed58ca06" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Фильтрация по типам автомобилей (седан, внедорожник, купе, кабриолет).

**Алгоритм сортировки:**
- JOIN-запросы между таблицами cars и car_types
- Группировка автомобилей по type_id
- Оптимизированные индексы в базе данных для быстрого поиска
- Кэширование карточек товаров в памяти для быстрого переключения между фильтрами

### Поиск автомобилей по поисковому запросу
<div align="center">
  <img src="https://github.com/user-attachments/assets/f6cdcd5f-e688-4191-9e11-e675640bd907" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Система поиска с поддержкой нечеткого поиска и автодополнения.

**Алгоритм поиска:**
- **TF-IDF поиск:** Использование алгоритма TF-IDF (Term Frequency-Inverse Document Frequency) для семантического поиска
- **Подсчет частоты терминов:** Анализ частоты вхождения поискового запроса в названия автомобилей
- **Ранжирование результатов:** Сортировка по релевантности на основе TF-IDF score
- **Регулярные выражения:** Поиск с учетом границ слов и регистра
- **Фильтрация результатов:** Отображение только товаров с релевантностью > 0

### Карточка автомобиля
<div align="center">
  <img src="https://github.com/user-attachments/assets/ad5d48d6-5d14-4566-9d08-447bf5ebe6ea" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Детальная страница автомобиля с полной информацией и возможностями взаимодействия.

**Функции:**
- Галерея изображений с возможностью выбора цвета
- Детальные характеристики автомобиля
- Интерактивные элементы управления (кнопки покупки, тест-драйва, аренды)
- Интеграция с системой заявок и корзиной

**Алгоритмы:**
- **Загрузка изображений:** Загрузка и масштабирование изображений при создании карточек
- **Управление состоянием:** Отслеживание выбранного цвета и конфигурации
- **Валидация данных:** Проверка доступности автомобиля перед оформлением заявки

### Личный кабинет
<div align="center">
  <img src="https://github.com/user-attachments/assets/42227f1d-2005-4865-8dd2-ece3151881c5" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Персональная область пользователя с историей покупок, заявок и настройками.

**Функции:**
- История покупок автомобилей
- Статус заявок на кредит, страхование, аренду и обслуживание
- Система уведомлений о статусе заявок
- Управление личными данными
- Просмотр приобретенных автомобилей
- Возможность скачивания договора на автомобиль в форматах HTML, DOCX и PDF

**Алгоритмы:**
- **Система уведомлений:** Отслеживание изменений статуса заявок через триггеры PostgreSQL
- **Кэширование данных:** Сохранение истории покупок в локальном кэше
- **Асинхронная загрузка:** Обновление данных без блокировки интерфейса

### Панель администратора
<div align="center">
  <img src="https://github.com/user-attachments/assets/924f4e80-6b59-4078-a41f-ab74424d1094" style="display: block; margin: 0 auto; width: 90%;"/>
</div>

**Описание:** Административная панель для управления автосалоном и обработки заявок клиентов.

**Функции:**
- Если плавающая панель управления перекрывает контент в таблице, её можно двигать в пределах окна (см. выше)
- Управление каталогом автомобилей (добавление, редактирование, удаление)
- Обработка заявок клиентов (одобрение/отклонение) 
- Управление пользователями системы
- Автоматическая генерация договоров при покупке в форматах HTML, DOCX и PDF

**Алгоритмы:**
- **CRUD операции:** Полный набор операций создания, чтения, обновления и удаления
- **Триггеры базы данных:** Автоматическое обновление связанных таблиц при изменении статуса заявок
- **Валидация данных:** Проверка целостности данных перед сохранением
- **Аудит изменений:** Логирование всех административных действий

## Основные функции

### Для клиентов:
1. **Просмотр каталога:**
   - Фильтрация по типам автомобилей
   - Сортировка по цветам
   - Поиск по параметрам

2. **Работа с автомобилем:**
   - Просмотр характеристик
   - Выбор цвета
   - Запись на тест-драйв
   - Оформление покупки

3. **Дополнительные услуги:**
   - Оформление кредита
   - Страхование
   - Сервисное обслуживание
   - Аренда автомобиля

### Для администраторов:
1. **Управление каталогом:**
   - Добавление новых моделей
   - Редактирование существующих
   - Управление наличием

2. **Работа с клиентами:**
   - Обработка заявок
   - Управление записями на тест-драйв
   - Оформление продаж

3. **Администрирование:**
   - Управление пользователями
   - Настройка справочников
   - Просмотр статистики

## База данных 

### ER-диаграмма
<div align="center">
  <img src="https://github.com/user-attachments/assets/c9227374-f653-43e9-85ba-15c0e65af0f7" style="display: block; margin: 0 auto; width: 80%;"/>
</div>

### Основные таблицы:
- admins (администраторы)
- car_types (типы автомобилей)
- cars (автомобили)
- clients (клиенты)
- purchases (история покупок)
- service_requests (заявки на сервис)
- insurance_requests (заявки на страхование)
- loan_requests (заявки на кредит)
- rental_requests (заявки на аренду)
- test_drives (заявки на тест-драйв)

## Безопасность
- Хеширование паролей (SHA-256)
- Валидация данных (CHECK, NOT NULL, FOREIGN KEY)
- Защита от SQL-инъекций (параметризованные запросы в приложении)
- Разграничение прав доступа (администраторы и клиенты)

## Технические особенности
- Триггеры PostgreSQL для автоматизации бизнес-логики (например, обновление статусов заявок)
- Кэширование истории покупок и заявок на уровне приложения
- Оптимизация производительности за счёт индексов и группировки
- Модульная архитектура на уровне приложения (Qt)
